<!DOCTYPE html>
<html>
    <head>
        <title> notuber </title>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <script src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
        <style>
            #myMap {
            width: 100%;
            height: 100%;
            }
        </style>

        <script>
            var xhr = new XMLHttpRequest();
            var uri = "https://defense-in-derpth.herokuapp.com/submit";
            var lat = 0;
            var long = 0;
            var argument;
            var me = new google.maps.LatLng(lat,long);
            var options = {
                                zoom: 10,
                                center: me,
                                mapTypeId: google.maps.MapTypeId.ROADMAP
                          };
            var map;
            var marker;

            function init(){
                map = new google.maps.Map(document.getElementById("myMap"),
                    options);
                getLocale();


            }

            function getLocale(){
                if(navigator.geolocation){
                    navigator.geolocation.getCurrentPosition(function(position){
                        lat = position.coords.latitude;
                        long = position.coords.longitude;
                        render();
                    })
                }
            }
            function render(){
                me = new google.maps.LatLng(lat,long);
                map.panTo(me);

                marker = new google.maps.Marker({
                    position: me,
                    title: "It's me!"
                });
                marker.setMap(map);
                google.maps.event.addListener(marker, 'click', function() {
					infowindow.setContent(marker.title);
					infowindow.open(map, marker);
				});
                post();
            }
            function post(){
                var username = "i3oxTCVc";
                var argument = "username="+username+"&lat="+lat+"&lng="+long;
                xhr.open('POST', uri, true);
                xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhr.send(argument);
            }
            </script>
        </head>
    <body onload="init()">
        <div id="myMap"></div>
    </body>
</html>
